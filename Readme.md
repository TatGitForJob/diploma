# 🧠 DictaCore — PDF → CSV + OCR + Yandex Disk

Клиент-серверное приложение для автоматизированной обработки бланков участников проекта «Тотальный диктант».

## 📌 Возможности проекта

- 📥 Загружает PDF-файлы через веб-интерфейс кнопкой **«Загрузить PDF»**  
- 🖼 Извлекает изображения с титульных страниц  
- 🧠 Распознаёт ФИО и ошибки с помощью ML-модели (трансформер)  
- 📊 Формирует Excel-отчёт с результатами и ссылками  
- 📝 Отчёты передаются на ручную проверку  
- ☁️ Финальные документы загружаются через интерфейс и преобразуются в итоговые CSV  
- 🌐 Предоставляет простой и понятный веб-интерфейс  

---

## 🚀 Быстрый старт

### 📦 Установка и запуск

```bash
git clone https://github.com/TatGitForJob/diploma.git
cd diploma
python -m venv venv
source venv/bin/activate
pip install PyMuPDF openpyxl pillow PyPDF2 yadisk requests flask flask_cors pandas opencv-python flasgger transformers torch
```

### 🌐 Запуск веб-интерфейса

```bash
cd frontend
npm install
npm run dev
```

После запуска открой [http://localhost:5173](http://localhost:5173) в браузере для доступа к интерфейсу.

---

### ⚙️ Настройка .env

Создай файл `.env` в корне `backend/` и добавь строку:

```dotenv
YANDEX_TOKEN=ваш_токен_из_https://yandex.ru/dev/disk/poligon/
```

> ❗ Не размещайте `.env` в открытых репозиториях — он содержит приватный ключ доступа.

---

## 🧠 ML-модель

Для работы требуется обученная модель на базе архитектуры трансформеров.

📥 Скачай модель по ссылке:  
[https://disk.yandex.ru/d/Pl2H2Jhy9MiLcw](https://disk.yandex.ru/d/Pl2H2Jhy9MiLcw)

📁 Помести файлы модели в папку `vit-base-letters_2/`. Ожидается структура:

```
vit-base-letters_2/
├── config.json
├── pytorch_model.bin
├── tokenizer.json
```

---

## 🏁 Запуск обработки

Выбор города (папки на Яндекс.Диске) осуществляется при входе через веб-интерфейс.  
После входа (например, как **Moscow** или **Novosibirsk**) пользователю становится доступна загрузка PDF и последующая обработка.

Готовые Excel-документы сохраняются в `/Город/xlsx/`,  
а оригинальные PDF перемещаются в `/Город/done/`.

Файлы отчётов после ручной проверки загружаются обратно через веб-интерфейс и автоматически преобразуются в итоговые CSV-файлы.

---

## 📂 Структура проекта

```
project-root/
├── backend/
│   ├── vit-base-letters_2/      # Папка с моделью
│   ├── auth.py
│   ├── .gitignore
│   ├── csv_processor.py
│   ├── excel_filler.py
│   ├── handlers_csv.py
│   ├── handlers_pdf.py
│   ├── main.py
│   ├── ocr.py
│   ├── pdf_processor.py
│   └── setup.sh
├── deploy/
├── frontend/
├── train-final-model/
├── .gitignore
└── Readme.md
```

---

## ✅ Зависимости

Устанавливаются через `pip`:

- `PyMuPDF` — работа с PDF-документами  
- `openpyxl` — генерация Excel-файлов  
- `pillow` — работа с изображениями  
- `PyPDF2` — дополнительная обработка PDF  
- `yadisk` — взаимодействие с API Яндекс.Диска  
- `requests` — HTTP-запросы  
- `flask`, `flask_cors` — сервер и API  
- `pandas` — обработка таблиц  
- `opencv-python` — работа с изображениями  
- `flasgger` — автогенерация Swagger-документации  
- `transformers`, `torch` — запуск ML-модели  

---

## 🛡 Особенности

- 📂 Не используется база данных — используется файловая структура на Яндекс.Диске  
- ⚡ Многопоточность — параллельная обработка сканов  
- ☁️ Серверная обработка и распознавание  
- 🖥 Удобный и понятный веб-интерфейс для не технических пользователей  

---

## 📬 Обратная связь

Нашёл баг или хочешь предложить улучшение?  
Создавай Issue на GitHub или напиши в Telegram: [@bibop_bibop](https://t.me/bibop_bibop)
